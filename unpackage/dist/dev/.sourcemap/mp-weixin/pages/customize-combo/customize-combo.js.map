{"version":3,"sources":["uni-app:///main.js","webpack:///D:/ruanjianbei/yingyang/pages/customize-combo/customize-combo.vue?3805","webpack:///D:/ruanjianbei/yingyang/pages/customize-combo/customize-combo.vue?3563","webpack:///D:/ruanjianbei/yingyang/pages/customize-combo/customize-combo.vue?7e81","webpack:///D:/ruanjianbei/yingyang/pages/customize-combo/customize-combo.vue?f485","uni-app:///pages/customize-combo/customize-combo.vue","webpack:///D:/ruanjianbei/yingyang/pages/customize-combo/customize-combo.vue?30b8","webpack:///D:/ruanjianbei/yingyang/pages/customize-combo/customize-combo.vue?772c"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","combo","id","name","description","dishes","totalPrice","totalCalories","totalNutrition","protein","carbs","fat","cafeteria","originalCombo","suggestedDishes","allDishes","price","image","tags","categories","calories","nutrition","cafeteriaNames","computed","cafeteriaTitle","onLoad","methods","loadCombo","uni","title","icon","duration","complete","setTimeout","console","updateSuggestedDishes","dish","removeDish","addDish","updateComboSummary","resetCombo","confirmCombo","cart","quantity","goBack"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,uBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4H;AAC5H;AACmE;AACL;AACa;;;AAG3E;AACiM;AACjM,gBAAgB,2MAAU;AAC1B,EAAE,qFAAM;AACR,EAAE,0FAAM;AACR,EAAE,mGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,8FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA;AAAkwB,CAAgB,+wBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCgHtxB;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;UAAAC;UAAAC;UAAAC;QAAA;QACAC;MACA;;MACAC;MACAC;MACAF;MACAG,YACA;QACAb;QACAC;QACAa;QACAC;QACAb;QACAc;QACAN;QACAO;QACAC;QACAC;UAAAZ;UAAAC;UAAAC;QAAA;MACA,GACA;QACAT;QACAC;QACAa;QACAC;QACAb;QACAc;QACAN;QACAO;QACAC;QACAC;UAAAZ;UAAAC;UAAAC;QAAA;MACA,GACA;QACAT;QACAC;QACAa;QACAC;QACAb;QACAc;QACAN;QACAO;QACAC;QACAC;UAAAZ;UAAAC;UAAAC;QAAA;MACA,GACA;QACAT;QACAC;QACAa;QACAC;QACAb;QACAc;QACAN;QACAO;QACAC;QACAC;UAAAZ;UAAAC;UAAAC;QAAA;MACA,GACA;QACAT;QACAC;QACAa;QACAC;QACAb;QACAc;QACAN;QACAO;QACAC;QACAC;UAAAZ;UAAAC;UAAAC;QAAA;MACA,GACA;QACAT;QACAC;QACAa;QACAC;QACAb;QACAc;QACAN;QACAO;QACAC;QACAC;UAAAZ;UAAAC;UAAAC;QAAA;MACA,GACA;QACAT;QACAC;QACAa;QACAC;QACAb;QACAc;QACAN;QACAO;QACAC;QACAC;UAAAZ;UAAAC;UAAAC;QAAA;MACA,GACA;QACAT;QACAC;QACAa;QACAC;QACAb;QACAc;QACAN;QACAO;QACAC;QACAC;UAAAZ;UAAAC;UAAAC;QAAA;MACA,GACA;QACAT;QACAC;QACAa;QACAC;QACAb;QACAc;QACAN;QACAO;QACAC;QACAC;UAAAZ;UAAAC;UAAAC;QAAA;MACA,GACA;QACAT;QACAC;QACAa;QACAC;QACAb;QACAc;QACAN;QACAO;QACAC;QACAC;UAAAZ;UAAAC;UAAAC;QAAA;MACA,EACA;MACAW;QACA;QACA;QACA;QACA;MACA;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MACA;QACA;QACA;QACA;UACA;UACA;;UAEA;UACA;YACA;UACA;YACA;YACA;cACA;YACA;cACA;YACA;cACA;YACA;cACA;YACA;YACA;UACA;UAEA;QACA;UACA;UACAC;YACAC;YACAC;YACAC;YACAC;cACAC;gBACAL;cACA;YACA;UACA;QACA;MACA;QACAM;QACAN;UACAC;UACAC;QACA;MACA;IACA;IAEAK;MAAA;MACA;MACA;QAAA;MAAA;;MAEA;MACA;QAAA,OACAC;MAAA,EACA;IACA;IAEAC;MACA;MACA;;MAEA;MACA;QACAT;UACAC;UACAC;QACA;QACA;MACA;;MAEA;MACA;;MAEA;MACA;;MAEA;MACA;MAEAF;QACAC;QACAC;MACA;IACA;IAEAQ;MACA;MACA;;MAEA;MACA;;MAEA;MACA;;MAEA;MACA;MAEAV;QACAC;QACAC;MACA;IACA;IAEAS;MACA;MACA;QAAA;MAAA;;MAEA;MACA;QAAA;MAAA;;MAEA;MACA;QACA;QACA;MACA;MAEA;QACA;QACA;MACA;MAEA;QACA;QACA;MACA;MAEA;QACA9B;QACAC;QACAC;MACA;IACA;IAEA6B;MACA;MACA;QACA;QACA;QAEAZ;UACAC;UACAC;QACA;MACA;IACA;IAEAW;MACA;QACA;QACA;;QAEA;QACA;UACA;YAAA;UAAA;UAEA;YACA;YACAC;UACA;YACA;YACAA,0CACAN;cACAO;YAAA,GACA;UACA;QACA;;QAEA;QACAf;QAEAA;UACAC;UACAC;QACA;;QAEA;QACAG;UACAL;QACA;MACA;QACAM;QACAN;UACAC;UACAC;QACA;MACA;IACA;IAEAc;MACAhB;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC9cA;AAAA;AAAA;AAAA;AAAilC,CAAgB,gkCAAG,EAAC,C;;;;;;;;;;;ACArmC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/customize-combo/customize-combo.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/customize-combo/customize-combo.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./customize-combo.vue?vue&type=template&id=3f100110&\"\nvar renderjs\nimport script from \"./customize-combo.vue?vue&type=script&lang=js&\"\nexport * from \"./customize-combo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./customize-combo.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/customize-combo/customize-combo.vue\"\nexport default component.exports","export * from \"-!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./customize-combo.vue?vue&type=template&id=3f100110&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.suggestedDishes.length\n  var l0 = _vm.__map(_vm.suggestedDishes, function (dish, index) {\n    var $orig = _vm.__get_orig(dish)\n    var g1 = dish.tags && dish.tags.length > 0\n    return {\n      $orig: $orig,\n      g1: g1,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./customize-combo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./customize-combo.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"container\">\r\n    <view class=\"header\">\r\n      <view class=\"header-left\" @tap=\"goBack\">\r\n        <text class=\"back-icon\">←</text>\r\n      </view>\r\n      <view class=\"header-title\">自定义套餐</view>\r\n      <view class=\"header-right\"></view>\r\n    </view>\r\n    \r\n    <view class=\"combo-info\">\r\n      <text class=\"combo-name\">{{combo.name}}</text>\r\n      <text class=\"combo-cafeteria\">{{cafeteriaTitle}}</text>\r\n      <text class=\"combo-desc\">{{combo.description}}</text>\r\n    </view>\r\n    \r\n    <!-- Current Dishes -->\r\n    <view class=\"section\">\r\n      <view class=\"section-header\">\r\n        <text class=\"section-title\">当前餐品</text>\r\n      </view>\r\n      <view class=\"dish-list current-dishes\">\r\n        <view class=\"dish-item\" v-for=\"(dish, index) in combo.dishes\" :key=\"index\">\r\n          <image :src=\"dish.image\" mode=\"aspectFill\" class=\"dish-image\"></image>\r\n          <view class=\"dish-info\">\r\n            <text class=\"dish-name\">{{dish.name}}</text>\r\n            <view class=\"dish-nutrition\">\r\n              <text class=\"nutrition-item\">热量: {{dish.calories}}kcal</text>\r\n              <text class=\"nutrition-item\">蛋白质: {{dish.nutrition.protein}}</text>\r\n              <text class=\"nutrition-item\">碳水: {{dish.nutrition.carbs}}</text>\r\n              <text class=\"nutrition-item\">脂肪: {{dish.nutrition.fat}}</text>\r\n            </view>\r\n            <view class=\"dish-bottom\">\r\n              <text class=\"dish-price\">¥{{dish.price}}</text>\r\n              <view class=\"remove-btn\" @tap=\"removeDish(index)\">移除</view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- Suggested Dishes from same cafeteria -->\r\n    <view class=\"section\">\r\n      <view class=\"section-header\">\r\n        <text class=\"section-title\">{{cafeteriaTitle}}推荐添加</text>\r\n      </view>\r\n      <view class=\"dish-list suggested-dishes\">\r\n        <view v-if=\"suggestedDishes.length === 0\" class=\"no-dishes\">\r\n          <text class=\"no-dishes-text\">当前食堂没有更多可添加的菜品</text>\r\n        </view>\r\n        <view class=\"dish-item\" v-for=\"(dish, index) in suggestedDishes\" :key=\"index\">\r\n          <image :src=\"dish.image\" mode=\"aspectFill\" class=\"dish-image\"></image>\r\n          <view class=\"dish-info\">\r\n            <text class=\"dish-name\">{{dish.name}}</text>\r\n            <view class=\"dish-nutrition\">\r\n              <text class=\"nutrition-item\">热量: {{dish.calories}}kcal</text>\r\n              <text class=\"nutrition-item\">蛋白质: {{dish.nutrition.protein}}</text>\r\n              <text class=\"nutrition-item\">碳水: {{dish.nutrition.carbs}}</text>\r\n              <text class=\"nutrition-item\">脂肪: {{dish.nutrition.fat}}</text>\r\n            </view>\r\n            <view class=\"dish-tags\" v-if=\"dish.tags && dish.tags.length > 0\">\r\n              <text class=\"tag-item\" v-for=\"(tag, tagIndex) in dish.tags\" :key=\"tagIndex\">{{tag}}</text>\r\n            </view>\r\n            <view class=\"dish-bottom\">\r\n              <text class=\"dish-price\">¥{{dish.price}}</text>\r\n              <view class=\"add-btn\" @tap=\"addDish(dish)\">添加</view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- Nutrition Summary -->\r\n    <view class=\"nutrition-summary\">\r\n      <view class=\"summary-header\">\r\n        <text class=\"summary-title\">营养总量</text>\r\n      </view>\r\n      <view class=\"nutrition-details\">\r\n        <view class=\"nutrition-row\">\r\n          <text class=\"nutrition-label\">总热量:</text>\r\n          <text class=\"nutrition-value\">{{combo.totalCalories}}kcal</text>\r\n        </view>\r\n        <view class=\"nutrition-row\">\r\n          <text class=\"nutrition-label\">蛋白质:</text>\r\n          <text class=\"nutrition-value\">{{combo.totalNutrition.protein}}</text>\r\n        </view>\r\n        <view class=\"nutrition-row\">\r\n          <text class=\"nutrition-label\">碳水化合物:</text>\r\n          <text class=\"nutrition-value\">{{combo.totalNutrition.carbs}}</text>\r\n        </view>\r\n        <view class=\"nutrition-row\">\r\n          <text class=\"nutrition-label\">脂肪:</text>\r\n          <text class=\"nutrition-value\">{{combo.totalNutrition.fat}}</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- Bottom Action Bar -->\r\n    <view class=\"bottom-bar\">\r\n      <view class=\"total-price\">\r\n        <text class=\"price-label\">总价:</text>\r\n        <text class=\"price-value\">¥{{combo.totalPrice}}</text>\r\n      </view>\r\n      <view class=\"action-btns\">\r\n        <view class=\"reset-btn\" @tap=\"resetCombo\">重置套餐</view>\r\n        <view class=\"confirm-btn\" @tap=\"confirmCombo\">确认并加入购物车</view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      combo: {\r\n        id: 0,\r\n        name: '',\r\n        description: '',\r\n        dishes: [],\r\n        totalPrice: 0,\r\n        totalCalories: 0,\r\n        totalNutrition: { protein: '0g', carbs: '0g', fat: '0g' },\r\n        cafeteria: '' // 添加食堂标识\r\n      },\r\n      originalCombo: null,\r\n      suggestedDishes: [],\r\n      cafeteria: '',\r\n      allDishes: [\r\n        { \r\n          id: 1, \r\n          name: '营养三色鸡肉饭', \r\n          price: 26, \r\n          image: '/static/dish1.jpg',\r\n          description: '富含蛋白质和维生素的健康套餐',\r\n          tags: ['高蛋白', '低脂肪'],\r\n          cafeteria: ['zhongcan', 'student'],\r\n          categories: ['recommend', 'protein', 'staple'],\r\n          calories: 450,\r\n          nutrition: { protein: '28g', carbs: '45g', fat: '12g' }\r\n        },\r\n        { \r\n          id: 2, \r\n          name: '低脂牛肉沙拉', \r\n          price: 22, \r\n          image: '/static/dish2.jpg',\r\n          description: '低脂高蛋白，健身人士的首选',\r\n          tags: ['高蛋白', '低脂肪', '生酮友好'],\r\n          cafeteria: ['xican'],\r\n          categories: ['recommend', 'protein', 'lowfat', 'meat'],\r\n          calories: 320,\r\n          nutrition: { protein: '24g', carbs: '18g', fat: '9g' }\r\n        },\r\n        { \r\n          id: 3, \r\n          name: '地中海风情饭', \r\n          price: 28, \r\n          image: '/static/dish3.jpg',\r\n          description: '地中海风味，富含多种营养素',\r\n          tags: ['多维生素', '均衡营养'],\r\n          cafeteria: ['xican'],\r\n          categories: ['vitamin', 'staple'],\r\n          calories: 480,\r\n          nutrition: { protein: '22g', carbs: '58g', fat: '16g' }\r\n        },\r\n        { \r\n          id: 4, \r\n          name: '五谷杂粮煲', \r\n          price: 18, \r\n          image: '/static/dish4.jpg',\r\n          description: '五谷杂粮，营养丰富',\r\n          tags: ['粗粮', '膳食纤维'],\r\n          cafeteria: ['zhongcan', 'student', 'qingzhen'],\r\n          categories: ['vitamin', 'lowfat', 'staple'],\r\n          calories: 390,\r\n          nutrition: { protein: '12g', carbs: '68g', fat: '5g' }\r\n        },\r\n        { \r\n          id: 5, \r\n          name: '鲜蔬鸡胸肉沙拉', \r\n          price: 23, \r\n          image: '/static/dish5.jpg',\r\n          description: '新鲜蔬菜搭配嫩滑鸡胸肉，营养均衡',\r\n          tags: ['高蛋白', '低热量'],\r\n          cafeteria: ['xican', 'student'],\r\n          categories: ['protein', 'lowfat', 'vegetable'],\r\n          calories: 310,\r\n          nutrition: { protein: '26g', carbs: '15g', fat: '10g' }\r\n        },\r\n        { \r\n          id: 6, \r\n          name: '牛油果三文鱼饭', \r\n          price: 32, \r\n          image: '/static/dish6.jpg',\r\n          description: '富含优质脂肪酸和Omega-3',\r\n          tags: ['OMEGA-3', '健康脂肪'],\r\n          cafeteria: ['xican'],\r\n          categories: ['protein', 'vitamin'],\r\n          calories: 520,\r\n          nutrition: { protein: '30g', carbs: '42g', fat: '22g' }\r\n        },\r\n        { \r\n          id: 7, \r\n          name: '蔬菜蒸蛋', \r\n          price: 12, \r\n          image: '/static/dish7.jpg',\r\n          description: '鲜嫩蒸蛋搭配各类营养蔬菜',\r\n          tags: ['高蛋白', '低脂肪'],\r\n          cafeteria: ['zhongcan', 'student', 'qingzhen'],\r\n          categories: ['protein', 'lowfat', 'vegetable'],\r\n          calories: 180,\r\n          nutrition: { protein: '16g', carbs: '8g', fat: '6g' }\r\n        },\r\n        { \r\n          id: 8, \r\n          name: '健康蔬菜汤', \r\n          price: 15, \r\n          image: '/static/dish8.jpg',\r\n          description: '多种蔬菜熬制，清淡可口',\r\n          tags: ['维生素', '低卡路里'],\r\n          cafeteria: ['zhongcan', 'xican', 'student', 'qingzhen'],\r\n          categories: ['vitamin', 'lowfat', 'soup', 'vegetable'],\r\n          calories: 120,\r\n          nutrition: { protein: '5g', carbs: '18g', fat: '2g' }\r\n        },\r\n        { \r\n          id: 9, \r\n          name: '清真牛肉拉面', \r\n          price: 28, \r\n          image: '/static/dish9.jpg',\r\n          description: '手工拉制面条，搭配清真牛肉',\r\n          tags: ['高蛋白', '主食'],\r\n          cafeteria: ['qingzhen'],\r\n          categories: ['staple', 'meat'],\r\n          calories: 520,\r\n          nutrition: { protein: '26g', carbs: '68g', fat: '15g' }\r\n        },\r\n        { \r\n          id: 10, \r\n          name: '羊肉抓饭', \r\n          price: 32, \r\n          image: '/static/dish10.jpg',\r\n          description: '新疆风味抓饭，配以鲜嫩羊肉',\r\n          tags: ['高蛋白', '主食'],\r\n          cafeteria: ['qingzhen'],\r\n          categories: ['staple', 'meat'],\r\n          calories: 580,\r\n          nutrition: { protein: '28g', carbs: '72g', fat: '18g' }\r\n        }\r\n      ],\r\n      cafeteriaNames: {\r\n        'zhongcan': '中餐厅',\r\n        'xican': '西餐厅',\r\n        'qingzhen': '清真食堂',\r\n        'student': '学生食堂'\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    cafeteriaTitle() {\r\n      return this.cafeteriaNames[this.cafeteria] || '';\r\n    }\r\n  },\r\n  onLoad(options) {\r\n    const comboId = options.comboId;\r\n    this.loadCombo(comboId);\r\n  },\r\n  methods: {\r\n    loadCombo(comboId) {\r\n      try {\r\n        // 从缓存中获取套餐数据\r\n        const comboData = uni.getStorageSync('current_combo');\r\n        if (comboData) {\r\n          this.combo = JSON.parse(JSON.stringify(comboData)); // 深拷贝\r\n          this.originalCombo = JSON.parse(JSON.stringify(comboData)); // 保存原始套餐，用于重置\r\n          \r\n          // 提取套餐所属的食堂\r\n          if (comboData.cafeteria) {\r\n            this.cafeteria = comboData.cafeteria;\r\n          } else {\r\n            // 尝试从ID推断所属食堂\r\n            if (comboId <= 2) {\r\n              this.cafeteria = 'zhongcan';\r\n            } else if (comboId <= 4) {\r\n              this.cafeteria = 'xican';\r\n            } else if (comboId === 5) {\r\n              this.cafeteria = 'qingzhen';\r\n            } else {\r\n              this.cafeteria = 'student';\r\n            }\r\n            this.combo.cafeteria = this.cafeteria;\r\n          }\r\n          \r\n          this.updateSuggestedDishes();\r\n        } else {\r\n          // 如果没有缓存数据，可能是直接进入页面，显示错误提示\r\n          uni.showToast({\r\n            title: '未能找到套餐数据',\r\n            icon: 'none',\r\n            duration: 2000,\r\n            complete: () => {\r\n              setTimeout(() => {\r\n                uni.navigateBack();\r\n              }, 2000);\r\n            }\r\n          });\r\n        }\r\n      } catch (e) {\r\n        console.error('Error loading combo data:', e);\r\n        uni.showToast({\r\n          title: '加载套餐数据失败',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    updateSuggestedDishes() {\r\n      // 获取当前套餐中的菜品ID\r\n      const currentDishIds = this.combo.dishes.map(dish => dish.id);\r\n      \r\n      // 根据当前套餐的食堂，筛选可以添加的菜品\r\n      this.suggestedDishes = this.allDishes.filter(dish => \r\n        dish.cafeteria.includes(this.cafeteria) && !currentDishIds.includes(dish.id)\r\n      );\r\n    },\r\n    \r\n    removeDish(index) {\r\n      // 获取要删除的菜品\r\n      const dish = this.combo.dishes[index];\r\n      \r\n      // 至少保留一个菜品\r\n      if (this.combo.dishes.length <= 1) {\r\n        uni.showToast({\r\n          title: '套餐至少需要保留一个菜品',\r\n          icon: 'none'\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // 从套餐中移除菜品\r\n      this.combo.dishes.splice(index, 1);\r\n      \r\n      // 更新套餐总价和营养信息\r\n      this.updateComboSummary();\r\n      \r\n      // 更新推荐菜品\r\n      this.updateSuggestedDishes();\r\n      \r\n      uni.showToast({\r\n        title: '已移除菜品',\r\n        icon: 'success'\r\n      });\r\n    },\r\n    \r\n    addDish(dish) {\r\n      // 复制菜品对象，避免引用原始对象\r\n      const newDish = JSON.parse(JSON.stringify(dish));\r\n      \r\n      // 添加到套餐\r\n      this.combo.dishes.push(newDish);\r\n      \r\n      // 更新套餐总价和营养信息\r\n      this.updateComboSummary();\r\n      \r\n      // 更新推荐菜品\r\n      this.updateSuggestedDishes();\r\n      \r\n      uni.showToast({\r\n        title: '已添加菜品',\r\n        icon: 'success'\r\n      });\r\n    },\r\n    \r\n    updateComboSummary() {\r\n      // 计算总价\r\n      this.combo.totalPrice = this.combo.dishes.reduce((total, dish) => total + dish.price, 0);\r\n      \r\n      // 计算总卡路里\r\n      this.combo.totalCalories = this.combo.dishes.reduce((total, dish) => total + dish.calories, 0);\r\n      \r\n      // 计算总营养素\r\n      const protein = this.combo.dishes.reduce((total, dish) => {\r\n        const value = parseInt(dish.nutrition.protein);\r\n        return total + value;\r\n      }, 0);\r\n      \r\n      const carbs = this.combo.dishes.reduce((total, dish) => {\r\n        const value = parseInt(dish.nutrition.carbs);\r\n        return total + value;\r\n      }, 0);\r\n      \r\n      const fat = this.combo.dishes.reduce((total, dish) => {\r\n        const value = parseInt(dish.nutrition.fat);\r\n        return total + value;\r\n      }, 0);\r\n      \r\n      this.combo.totalNutrition = {\r\n        protein: `${protein}g`,\r\n        carbs: `${carbs}g`,\r\n        fat: `${fat}g`\r\n      };\r\n    },\r\n    \r\n    resetCombo() {\r\n      // 恢复原始套餐\r\n      if (this.originalCombo) {\r\n        this.combo = JSON.parse(JSON.stringify(this.originalCombo));\r\n        this.updateSuggestedDishes();\r\n        \r\n        uni.showToast({\r\n          title: '已重置套餐',\r\n          icon: 'success'\r\n        });\r\n      }\r\n    },\r\n    \r\n    confirmCombo() {\r\n      try {\r\n        // 获取购物车\r\n        let cart = uni.getStorageSync('cart') || [];\r\n        \r\n        // 添加套餐中的所有菜品\r\n        this.combo.dishes.forEach(dish => {\r\n          const index = cart.findIndex(item => item.id === dish.id);\r\n          \r\n          if (index > -1) {\r\n            // 已存在，数量+1\r\n            cart[index].quantity += 1;\r\n          } else {\r\n            // 不存在，添加到购物车\r\n            cart.push({\r\n              ...dish,\r\n              quantity: 1\r\n            });\r\n          }\r\n        });\r\n        \r\n        // 保存购物车\r\n        uni.setStorageSync('cart', cart);\r\n        \r\n        uni.showToast({\r\n          title: '已加入购物车',\r\n          icon: 'success'\r\n        });\r\n        \r\n        // 返回上一页\r\n        setTimeout(() => {\r\n          uni.navigateBack();\r\n        }, 1500);\r\n      } catch (e) {\r\n        console.error('Error adding combo to cart:', e);\r\n        uni.showToast({\r\n          title: '添加购物车失败',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    goBack() {\r\n      uni.navigateBack();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n  padding-bottom: 120rpx;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  align-items: center;\r\n  height: 90rpx;\r\n  background-color: #fff;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 10;\r\n  padding: 0 30rpx;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.header-left {\r\n  width: 60rpx;\r\n}\r\n\r\n.header-right {\r\n  width: 60rpx;\r\n}\r\n\r\n.back-icon {\r\n  font-size: 40rpx;\r\n  color: #333;\r\n}\r\n\r\n.header-title {\r\n  flex: 1;\r\n  text-align: center;\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.combo-info {\r\n  background-color: #fff;\r\n  padding: 30rpx;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.combo-name {\r\n  font-size: 34rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.combo-cafeteria {\r\n  font-size: 26rpx;\r\n  color: #4CAF50;\r\n  background-color: rgba(76, 175, 80, 0.1);\r\n  padding: 4rpx 16rpx;\r\n  border-radius: 20rpx;\r\n  display: inline-block;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.combo-desc {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n}\r\n\r\n.section {\r\n  background-color: #fff;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.section-header {\r\n  padding: 20rpx 30rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.section-title {\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  position: relative;\r\n  padding-left: 16rpx;\r\n}\r\n\r\n.section-title::before {\r\n  content: '';\r\n  position: absolute;\r\n  left: 0;\r\n  top: 6rpx;\r\n  height: 28rpx;\r\n  width: 6rpx;\r\n  background-color: #4CAF50;\r\n  border-radius: 3rpx;\r\n}\r\n\r\n.dish-list {\r\n  padding: 0 30rpx;\r\n}\r\n\r\n.dish-item {\r\n  display: flex;\r\n  padding: 20rpx 0;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.dish-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.dish-image {\r\n  width: 140rpx;\r\n  height: 140rpx;\r\n  border-radius: 8rpx;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.dish-info {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.dish-name {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.dish-nutrition {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin: 8rpx 0;\r\n  background-color: #f8f8f8;\r\n  border-radius: 8rpx;\r\n  padding: 8rpx;\r\n}\r\n\r\n.nutrition-item {\r\n  font-size: 22rpx;\r\n  color: #666;\r\n  margin-right: 16rpx;\r\n  margin-bottom: 4rpx;\r\n}\r\n\r\n.dish-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin: 8rpx 0;\r\n}\r\n\r\n.tag-item {\r\n  font-size: 20rpx;\r\n  color: #4CAF50;\r\n  background-color: rgba(76, 175, 80, 0.1);\r\n  padding: 4rpx 10rpx;\r\n  border-radius: 20rpx;\r\n  margin-right: 10rpx;\r\n  margin-bottom: 6rpx;\r\n}\r\n\r\n.dish-bottom {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: auto;\r\n}\r\n\r\n.dish-price {\r\n  font-size: 30rpx;\r\n  color: #ff5000;\r\n  font-weight: bold;\r\n}\r\n\r\n.add-btn, .remove-btn {\r\n  width: 100rpx;\r\n  height: 50rpx;\r\n  border-radius: 25rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.add-btn {\r\n  background-color: #4CAF50;\r\n  color: #fff;\r\n}\r\n\r\n.remove-btn {\r\n  background-color: #ff5000;\r\n  color: #fff;\r\n}\r\n\r\n.no-dishes {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 40rpx 0;\r\n}\r\n\r\n.no-dishes-text {\r\n  font-size: 28rpx;\r\n  color: #999;\r\n}\r\n\r\n.nutrition-summary {\r\n  background-color: #fff;\r\n  padding: 30rpx;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.summary-header {\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.summary-title {\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.nutrition-details {\r\n  background-color: #f8f8f8;\r\n  border-radius: 8rpx;\r\n  padding: 20rpx;\r\n}\r\n\r\n.nutrition-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.nutrition-row:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.nutrition-label {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n}\r\n\r\n.nutrition-value {\r\n  font-size: 26rpx;\r\n  color: #333;\r\n  font-weight: bold;\r\n}\r\n\r\n.bottom-bar {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 100rpx;\r\n  background-color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 30rpx;\r\n  box-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.total-price {\r\n  flex: 1;\r\n}\r\n\r\n.price-label {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n}\r\n\r\n.price-value {\r\n  font-size: 36rpx;\r\n  color: #ff5000;\r\n  font-weight: bold;\r\n  margin-left: 10rpx;\r\n}\r\n\r\n.action-btns {\r\n  display: flex;\r\n}\r\n\r\n.reset-btn, .confirm-btn {\r\n  height: 70rpx;\r\n  line-height: 70rpx;\r\n  border-radius: 35rpx;\r\n  text-align: center;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.reset-btn {\r\n  width: 150rpx;\r\n  background-color: #f5f5f5;\r\n  color: #666;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.confirm-btn {\r\n  width: 240rpx;\r\n  background-color: #4CAF50;\r\n  color: #fff;\r\n}\r\n</style> ","import mod from \"-!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./customize-combo.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./customize-combo.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1747046419006\n      var cssReload = require(\"D:/app/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}