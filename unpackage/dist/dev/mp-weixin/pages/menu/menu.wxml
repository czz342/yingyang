<view class="container"><scroll-view class="category-scroll" scroll-x="{{true}}"><block wx:for="{{categories}}" wx:for-item="category" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['changeCategory',['$0'],[[['categories','',index,'id']]]]]]]}}" class="{{['category-item',(currentCategory===category.id)?'active':'']}}" bindtap="__e"><text class="category-text">{{category.name}}</text></view></block></scroll-view><view class="dish-list"><block wx:for="{{filteredDishes}}" wx:for-item="dish" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['navigateToDish',['$0'],[[['filteredDishes','',index,'id']]]]]]]}}" class="dish-item" bindtap="__e"><image class="dish-image" src="{{dish.image}}" mode="aspectFill"></image><view class="dish-info"><view class="dish-name-line"><text class="dish-name">{{dish.name}}</text></view><text class="dish-desc">{{dish.description}}</text><view class="dish-nutrition"><block wx:for="{{dish.tags}}" wx:for-item="tag" wx:for-index="tagIndex" wx:key="tagIndex"><text class="nutrition-tag">{{tag}}</text></block></view><view class="nutrition-details"><text class="nutrition-item">{{"热量: "+dish.calories+"kcal"}}</text><text class="nutrition-item">{{"蛋白质: "+dish.nutrition.protein}}</text><text class="nutrition-item">{{"碳水: "+dish.nutrition.carbs}}</text><text class="nutrition-item">{{"脂肪: "+dish.nutrition.fat}}</text></view><view class="dish-bottom"><view class="price-container"><text class="dish-price">{{"¥"+dish.price}}</text><block wx:if="{{dish.originalPrice}}"><text class="original-price">{{"¥"+dish.originalPrice}}</text></block></view><view data-event-opts="{{[['tap',[['addToCart',['$0'],[[['filteredDishes','',index]]]]]]]}}" class="add-btn" catchtap="__e">+</view></view></view></view></block></view><block wx:if="{{$root.g0===0}}"><view class="no-results"><image class="no-results-image" src="/static/no-results.png" mode="aspectFit"></image><text class="no-results-text">没有找到相关菜品</text></view></block><block wx:if="{{currentCategory==='all'||currentCategory==='recommend'}}"><view class="meal-combos"><view class="section-header"><text class="section-title">营养套餐推荐</text></view><view class="combo-list"><block wx:for="{{mealCombos}}" wx:for-item="combo" wx:for-index="index" wx:key="index"><view class="combo-item"><view class="combo-header"><text class="combo-name">{{combo.name}}</text><text class="combo-price">{{"¥"+combo.totalPrice}}</text></view><view class="combo-desc">{{combo.description}}</view><view class="combo-nutrition"><text class="combo-nutrition-item">{{"总热量: "+combo.totalCalories+"kcal"}}</text><text class="combo-nutrition-item">{{"蛋白质: "+combo.totalNutrition.protein}}</text><text class="combo-nutrition-item">{{"碳水: "+combo.totalNutrition.carbs}}</text><text class="combo-nutrition-item">{{"脂肪: "+combo.totalNutrition.fat}}</text></view><view class="combo-dishes"><block wx:for="{{combo.dishes}}" wx:for-item="comboDish" wx:for-index="dishIndex" wx:key="dishIndex"><view class="combo-dish"><image class="combo-dish-image" src="{{comboDish.image}}" mode="aspectFill"></image><view class="combo-dish-info"><text class="combo-dish-name">{{comboDish.name}}</text><view class="combo-dish-actions"><text class="combo-dish-price">{{"¥"+comboDish.price}}</text><view data-event-opts="{{[['tap',[['removeFromCombo',['$0','$1'],[[['mealCombos','',index]],[['mealCombos','',index],['dishes','',dishIndex]]]]]]]}}" class="combo-dish-btn remove" catchtap="__e">-</view></view></view></view></block></view><view class="combo-actions"><view data-event-opts="{{[['tap',[['customizeCombo',['$0'],[[['mealCombos','',index]]]]]]]}}" class="customize-btn" bindtap="__e">自定义套餐</view><view data-event-opts="{{[['tap',[['addComboToCart',['$0'],[[['mealCombos','',index]]]]]]]}}" class="add-combo-btn" bindtap="__e">加入购物车</view></view></view></block></view></view></block><cart-notifier vue-id="9ad1f540-1" bind:__l="__l"></cart-notifier></view>