<view class="container"><view class="header"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="header-left" bindtap="__e"><text class="back-icon">←</text></view><view class="header-title">自定义套餐</view><view class="header-right"></view></view><view class="combo-info"><text class="combo-name">{{combo.name}}</text><text class="combo-cafeteria">{{cafeteriaTitle}}</text><text class="combo-desc">{{combo.description}}</text></view><view class="section"><view class="section-header"><text class="section-title">当前餐品</text></view><view class="dish-list current-dishes"><block wx:for="{{combo.dishes}}" wx:for-item="dish" wx:for-index="index" wx:key="index"><view class="dish-item"><image class="dish-image" src="{{dish.image}}" mode="aspectFill"></image><view class="dish-info"><text class="dish-name">{{dish.name}}</text><view class="dish-nutrition"><text class="nutrition-item">{{"热量: "+dish.calories+"kcal"}}</text><text class="nutrition-item">{{"蛋白质: "+dish.nutrition.protein}}</text><text class="nutrition-item">{{"碳水: "+dish.nutrition.carbs}}</text><text class="nutrition-item">{{"脂肪: "+dish.nutrition.fat}}</text></view><view class="dish-bottom"><text class="dish-price">{{"¥"+dish.price}}</text><view data-event-opts="{{[['tap',[['removeDish',[index]]]]]}}" class="remove-btn" bindtap="__e">移除</view></view></view></view></block></view></view><view class="section"><view class="section-header"><text class="section-title">{{cafeteriaTitle+"推荐添加"}}</text></view><view class="dish-list suggested-dishes"><block wx:if="{{$root.g0===0}}"><view class="no-dishes"><text class="no-dishes-text">当前食堂没有更多可添加的菜品</text></view></block><block wx:for="{{$root.l0}}" wx:for-item="dish" wx:for-index="index" wx:key="index"><view class="dish-item"><image class="dish-image" src="{{dish.$orig.image}}" mode="aspectFill"></image><view class="dish-info"><text class="dish-name">{{dish.$orig.name}}</text><view class="dish-nutrition"><text class="nutrition-item">{{"热量: "+dish.$orig.calories+"kcal"}}</text><text class="nutrition-item">{{"蛋白质: "+dish.$orig.nutrition.protein}}</text><text class="nutrition-item">{{"碳水: "+dish.$orig.nutrition.carbs}}</text><text class="nutrition-item">{{"脂肪: "+dish.$orig.nutrition.fat}}</text></view><block wx:if="{{dish.g1}}"><view class="dish-tags"><block wx:for="{{dish.$orig.tags}}" wx:for-item="tag" wx:for-index="tagIndex" wx:key="tagIndex"><text class="tag-item">{{tag}}</text></block></view></block><view class="dish-bottom"><text class="dish-price">{{"¥"+dish.$orig.price}}</text><view data-event-opts="{{[['tap',[['addDish',['$0'],[[['suggestedDishes','',index]]]]]]]}}" class="add-btn" bindtap="__e">添加</view></view></view></view></block></view></view><view class="nutrition-summary"><view class="summary-header"><text class="summary-title">营养总量</text></view><view class="nutrition-details"><view class="nutrition-row"><text class="nutrition-label">总热量:</text><text class="nutrition-value">{{combo.totalCalories+"kcal"}}</text></view><view class="nutrition-row"><text class="nutrition-label">蛋白质:</text><text class="nutrition-value">{{combo.totalNutrition.protein}}</text></view><view class="nutrition-row"><text class="nutrition-label">碳水化合物:</text><text class="nutrition-value">{{combo.totalNutrition.carbs}}</text></view><view class="nutrition-row"><text class="nutrition-label">脂肪:</text><text class="nutrition-value">{{combo.totalNutrition.fat}}</text></view></view></view><view class="bottom-bar"><view class="total-price"><text class="price-label">总价:</text><text class="price-value">{{"¥"+combo.totalPrice}}</text></view><view class="action-btns"><view data-event-opts="{{[['tap',[['resetCombo',['$event']]]]]}}" class="reset-btn" bindtap="__e">重置套餐</view><view data-event-opts="{{[['tap',[['confirmCombo',['$event']]]]]}}" class="confirm-btn" bindtap="__e">确认并加入购物车</view></view></view></view>